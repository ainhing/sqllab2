use master
DROP DATABASE if exists  THEME_PARK
CREATE DATABASE THEME_PARK
USE THEME_PARK

CREATE TABLE THEMEPARK
(PARK_CODE VARCHAR(10) PRIMARY KEY,
PARK_NAME VARCHAR(30) NOT NULL,
PARK_CITY VARCHAR(50) NOT NULL,
PARK_COUNTRY CHAR(2) NOT NULL)

CREATE TABLE EMPLOYEE
(EMP_NUM NUMERIC(4) PRIMARY KEY,
EMP_TITLE VARCHAR(4) NOT NULL,
ENP_LNAME VARCHAR(15) NOT NULL,
EMP_FNAME VARCHAR(15) NOT NULL,
EMP_DOB DATE NOT NULL,
EMP_HIRE_DATE DATE NOT NULL,
EMP_AREACODE VARCHAR(4) NOT NULL,
EMP_PHONE VARCHAR(12) NOT NULL,
PARK_CODE VARCHAR(10) FOREIGN KEY
REFERENCES THEMEPARK(PARK_CODE))

-------------------------------------
CREATE TABLE TICKET
(TICKET_NO NUMERIC(10) PRIMARY KEY ,
TICKET_PRICE NUMERIC(4,2) NOT NULL,
TICKET_TYPE VARCHAR(10) NOT NULL,
PARK_CODE VARCHAR(10) FOREIGN KEY
REFERENCES THEMEPARK(PARK_CODE))

CREATE TABLE ATTRACTION
(ATTRACT_NO NUMERIC(10) PRIMARY KEY,
PARK_CODE VARCHAR(10) FOREIGN KEY
REFERENCES THEMEPARK(PARK_CODE),
ATTRACT_NAME VARCHAR(35) NOT NULL,
ATTRACT_AGE NUMERIC(3) NOT NULL,
ATTRACT_CAPACITY NUMERIC(3) NOT NULL)
CREATE TABLE HOURS
(HOURS_PER_ATTRACT NUMERIC(2) NOT NULL,
HOUR_RATE NUMERIC(4,2) NOT NULL,
DATE_WORKED DATE NOT NULL,
EMP_NUM NUMERIC(4) NOT NULL,
ATTRACT_NO NUMERIC(10) NOT NULL,
PRIMARY KEY (EMP_NUM, ATTRACT_NO),
FOREIGN KEY (EMP_NUM) REFERENCES EMPLOYEE(EMP_NUM),
FOREIGN KEY (ATTRACT_NO) REFERENCES ATTRACTION(ATTRACT_NO))
CREATE TABLE SALES
(TRANSACTION_NO NUMERIC PRIMARY KEY,
PARK_CODE VARCHAR(10) FOREIGN KEY
REFERENCES THEMEPARK(PARK_CODE),
SALE_DATE DATE NOT NULL)



CREATE TABLE SALESLINE
(TRANSACTION_NO NUMERIC PRIMARY KEY,
LINE_NO NUMERIC,
TICKET_NO NUMERIC(10) not null,
FOREIGN KEY (TRANSACTION_NO) REFERENCES SALES(TRANSACTION_NO),
FOREIGN KEY (TICKET_NO) REFERENCES TICKET(TICKET_NO),
LINE_QTY NUMERIC(4) NOT NULL,
LINE_PRICE NUMERIC(9,2) NOT NULL)
